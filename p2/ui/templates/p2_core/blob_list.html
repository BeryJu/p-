{% extends 'base/base.html' %}

{% load i18n %}
{% load p2_ui %}

{% block content %}
<h2>
  {% blocktrans with volume=volume.name %}Browse {{ volume }}{% endblocktrans %}
  <!-- <a class="btn btn-success" href="">
    <i class="fa fa-plus text-light" aria-hidden="true"></i>
  </a> -->
</h2>
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="?prefix=/">{{ volume.name }}</a></li>
    {% for crumb in breadcrumbs %}
      {% if not forloop.first and not forloop.last %}
        <li class="breadcrumb-item"><a href="?prefix={{ crumb.prefix }}">{{ crumb.title }}</a></li>
      {% endif %}
      {% if forloop.last %}
        <li class="breadcrumb-item active" aria-current="page">{{ crumb.title }}</li>
      {% endif %}
    {% endfor %}
  </ol>
</nav>
<table class="table table-striped table-bordered table-hover table-sm">
  <thead class="thead-dark">
    <tr>
      <th>{% trans 'Path' %}</th>
      <th>{% trans 'Size' %}</th>
      <th>{% trans 'Download' %}</th>
      <th>{% trans 'Edit' %}</th>
      <th>{% trans 'Delete' %}</th>
    </tr>
  </thead>
  <tbody>
    {% for prefix in prefixes %}
    <tr>
      <td>
        <i class="fa fa-folder" aria-hidden="true"></i>
        <a href="?prefix={{ prefix.absolute_prefix }}">
          {{ prefix.relative_prefix }}
        </a>
      </td>
      <td>-</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    {% endfor %}
    {% for object in objects %}
    <tr>
      <td>
        <i class="fa fa-file" aria-hidden="true"></i>
        {{ object.filename }}
      </td>
      <td>{{ object|get_attribute:"size:bytes"|filesizeformat }}</td>
      <td>
        <a class="btn btn-sm btn-primary" href="{% url 'p2_ui:core-blob-download' pk=object.pk %}">
          <i class="fa fa-download text-light" aria-hidden="true"></i>
        </a>
      </td>
      <td>
        <a class="btn btn-sm btn-primary" href="{% url 'p2_ui:core-blob-update' pk=object.pk %}">
          <i class="fa fa-pencil text-light" aria-hidden="true"></i>
        </a>
      </td>
      <td>
        <a class="btn btn-sm btn-danger" href="{% url 'p2_ui:core-blob-delete' pk=object.pk %}">
          <i class="fa fa-trash text-light" aria-hidden="true"></i>
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% include 'blocks/pagination.html' %}
{% endblock %}
